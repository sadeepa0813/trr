<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="google-site-verification" content="WlaDrx8RonvdwEu2oOOE_kdvvXQNXd70wH8Ej5HoSYo" />
  <title>A/L & O/L Exam Countdown</title>
  <link rel="icon" href="https://i.ibb.co/jZJK1jqK/exam-bot-dp2.png" type="image/png" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script> 
  <style>
    :root{
      --bg:#0f1724; 
      --card:#0b1220; 
      --accent:#7c3aed; 
      --secondary:#10b981;
      --glass: rgba(255,255,255,0.04);
      --success: #22c55e;
      --accent2026: #ce13c4;
      --secondary2026: #f54df5;
      --accent2027: #8b5cf6;
      --secondary2027: #06b6d4;
      --accent-ol: #22c55e;
      --secondary-ol: #10b981;
      --whatsapp: #25D366;
      --muted: #94a3b8;
    }
    * {
      box-sizing:border-box;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;
      margin:0;
      padding:0;
    }
    body {
      min-height:100vh;
      background:linear-gradient(135deg,#071029 0%, #0f172a 50%, #1e293b 100%);
      color:#e6eef8;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:16px;
      animation: bgShift 30s ease-in-out infinite alternate;
    }
    @keyframes bgShift {
      0% { background:linear-gradient(135deg,#071029 0%, #0f172a 50%, #1e293b 100%); }
      100% { background:linear-gradient(135deg,#1e293b 0%, #0f172a 50%, #071029 100%); }
    }
    .wrap {
      width:100%;
      max-width:400px;
      animation: fadeInUp 0.8s ease-out;
    }
    @keyframes fadeInUp {
      from { opacity:0; transform:translateY(20px); }
      to { opacity:1; transform:translateY(0); }
    }
    .card {
      background:linear-gradient(135deg,var(--card), rgba(11,18,32,0.8));
      border-radius:16px;
      padding:20px;
      box-shadow:0 20px 40px rgba(2,6,23,0.8), inset 0 1px 0 rgba(255,255,255,0.1);
      backdrop-filter:blur(10px);
      border:1px solid rgba(255,255,255,0.05);
      margin-bottom:12px;
    }
    .card-2026 {
      background:linear-gradient(135deg,rgba(220,38,38,0.1), rgba(11,18,32,0.8));
      border:1px solid rgba(220,38,38,0.2);
    }
    .card-2027 {
      background:linear-gradient(135deg,rgba(139,92,246,0.1), rgba(11,18,32,0.8));
      border:1px solid rgba(139,92,246,0.2);
    }
    .card-ol {
      background:linear-gradient(135deg,rgba(34,197,94,0.1), rgba(11,18,32,0.8));
      border:1px solid rgba(34,197,94,0.2);
    }
    header {
      text-align:center;
      margin-bottom:16px;
    }
    .logo {
      width:60px;
      height:60px;
      border-radius:16px;
      background: linear-gradient(135deg,var(--accent),#2563eb);
      display:flex;
      align-items:center;
      justify-content:center;
      margin:0 auto 12px;
      box-shadow:0 8px 25px rgba(124,58,237,0.3);
      animation: pulse 3s ease-in-out infinite;
      font-size:20px;
      font-weight:800;
      color:white;
    }
    .logo-2026 {
      background: linear-gradient(135deg,var(--accent2026),#dc2626);
      box-shadow:0 8px 25px rgba(220,38,38,0.3);
    }
    .logo-2027 {
      background: linear-gradient(135deg,var(--accent2027),#8b5cf6);
      box-shadow:0 8px 25px rgba(139,92,246,0.3);
    }
    .logo-ol {
      background: linear-gradient(135deg,var(--accent-ol),#22c55e);
      box-shadow:0 8px 25px rgba(34,197,94,0.3);
    }
    @keyframes pulse {
      0%, 100% { transform:scale(1); }
      50% { transform:scale(1.05); }
    }
    h1 {
      margin:0 0 6px;
      font-size:16px;
      font-weight:700;
      background:linear-gradient(135deg,#e6eef8,#cbd5e1);
      background-clip:text;
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
    }
    .lead {
      margin:0 0 16px;
      color:var(--muted);
      font-size:11px;
    }
    .batch-selector {
      display:grid;
      grid-template-columns:repeat(2,1fr);
      gap:4px;
      margin-bottom:16px;
      background:var(--glass);
      padding:4px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.05);
    }
    .batch-btn {
      padding:6px 10px;
      border:0;
      border-radius:6px;
      background:transparent;
      color:var(--muted);
      font-weight:600;
      font-size:10px;
      cursor:pointer;
      transition:all 0.3s ease;
    }
    .batch-btn.active {
      background:linear-gradient(135deg,var(--accent),#2563eb);
      color:white;
    }
    .batch-btn-2026.active {
      background:linear-gradient(135deg,var(--accent2026),#dc2626);
    }
    .batch-btn-2027.active {
      background:linear-gradient(135deg,var(--accent2027),#8b5cf6);
    }
    .batch-btn-ol.active {
      background:linear-gradient(135deg,var(--accent-ol),#22c55e);
    }
    .status-bar {
      display:flex;
      justify-content:space-between;
      align-items:center;
      background:var(--glass);
      padding:8px 12px;
      border-radius:8px;
      margin-bottom:16px;
      border:1px solid rgba(255,255,255,0.05);
    }
    .countdown-status {
      font-size:11px;
      color:var(--secondary);
      display:flex;
      align-items:center;
      gap:4px;
    }
    .countdown-status-2026 {
      color:var(--secondary2026);
    }
    .countdown-status-2027 {
      color:var(--secondary2027);
    }
    .countdown-status-ol {
      color:var(--secondary-ol);
    }
    .status-dot {
      width:6px;
      height:6px;
      border-radius:50%;
      background:var(--secondary);
      animation: blink 2s infinite;
    }
    .status-dot-2026 {
      background:var(--secondary2026);
    }
    .status-dot-2027 {
      background:var(--secondary2027);
    }
    .status-dot-ol {
      background:var(--secondary-ol);
    }
    @keyframes blink {
      0%, 100% { opacity:1; }
      50% { opacity:0.3; }
    }
    .countdown {
      display:grid;
      grid-template-columns:repeat(2,1fr);
      gap:8px;
      margin-bottom:16px;
    }
    .tile {
      background:var(--glass);
      padding:16px 12px;
      border-radius:12px;
      text-align:center;
      border:1px solid rgba(255,255,255,0.05);
      transition:all 0.3s ease;
      position:relative;
      overflow:hidden;
    }
    .tile::before {
      content:'';
      position:absolute;
      top:0;
      left:-100%;
      width:100%;
      height:100%;
      background:linear-gradient(90deg,transparent,rgba(124,58,237,0.1),transparent);
      transition:left 2s;
    }
    .tile-2026::before {
      background:linear-gradient(90deg,transparent,rgba(220,38,38,0.1),transparent);
    }
    .tile-2027::before {
      background:linear-gradient(90deg,transparent,rgba(139,92,246,0.1),transparent);
    }
    .tile-ol::before {
      background:linear-gradient(90deg,transparent,rgba(34,197,94,0.1),transparent);
    }
    .tile-animate::before {
      left:100%;
    }
    .tile .num {
      font-size:24px;
      font-weight:800;
      background:linear-gradient(135deg,var(--accent),#2563eb);
      background-clip:text;
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      line-height:1;
    }
    .tile-2026 .num {
      background:linear-gradient(135deg,var(--accent2026),#dc2626);
      background-clip:text;
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
    }
    .tile-2027 .num {
      background:linear-gradient(135deg,var(--accent2027),#8b5cf6);
      background-clip:text;
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
    }
    .tile-ol .num {
      background:linear-gradient(135deg,var(--accent-ol),#22c55e);
      background-clip:text;
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
    }
    .tile .lbl {
      font-size:10px;
      color:var(--muted);
      margin-top:4px;
      font-weight:500;
      text-transform:uppercase;
      letter-spacing:0.5px;
    }
    .quote-section {
      background:linear-gradient(135deg,rgba(16,185,129,0.1),rgba(124,58,237,0.1));
      border-radius:12px;
      padding:14px;
      margin-bottom:16px;
      border:1px solid rgba(16,185,129,0.2);
      text-align:center;
    }
    .quote-section-2026 {
      background:linear-gradient(135deg,rgba(220,38,38,0.1),rgba(249,115,22,0.1));
      border:1px solid rgba(220,38,38,0.2);
    }
    .quote-section-2027 {
      background:linear-gradient(135deg,rgba(139,92,246,0.1),rgba(6,182,212,0.1));
      border:1px solid rgba(139,92,246,0.2);
    }
    .quote-section-ol {
      background:linear-gradient(135deg,rgba(34,197,94,0.1),rgba(16,185,129,0.1));
      border:1px solid rgba(34,197,94,0.2);
    }
    .quote-text {
      font-size:12px;
      line-height:1.4;
      margin-bottom:8px;
      color:#e6eef8;
      font-weight:500;
    }
    .quote-number {
      font-size:9px;
      color:var(--secondary);
      font-weight:600;
    }
    .quote-number-2026 {
      color:var(--secondary2026);
    }
    .quote-number-2027 {
      color:var(--secondary2027);
    }
    .quote-number-ol {
      color:var(--secondary-ol);
    }
    .progress-section {
      margin-bottom:12px;
    }
    .progress-item {
      display:flex;
      justify-content:space-between;
      align-items:center;
      background:var(--glass);
      padding:10px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,0.05);
    }
    .progress-info {
      flex:1;
    }
    .progress-title {
      font-weight:600;
      margin-bottom:2px;
      font-size:11px;
    }
    .progress-subtitle {
      font-size:9px;
      color:var(--muted);
    }
    .progress-value {
      font-weight:700;
      font-size:14px;
      background:linear-gradient(135deg,var(--accent),#2563eb);
      background-clip:text;
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
    }
    .progress-value-2026 {
      background:linear-gradient(135deg,var(--accent2026),#dc2626);
      background-clip:text;
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
    }
    .progress-value-2027 {
      background:linear-gradient(135deg,var(--accent2027),#8b5cf6);
      background-clip:text;
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
    }
    .progress-value-ol {
      background:linear-gradient(135deg,var(--accent-ol),#22c55e);
      background-clip:text;
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
    }
    .countdown-section {
      display:block;
    }
    .countdown-section.hidden {
      display:none;
    }
    .hidden {
      display: none !important;
    }
    .footer {
      text-align:center;
      padding:8px;
      background:var(--glass);
      border-radius:8px;
      border:1px solid rgba(255,255,255,0.05);
      margin-top:12px;
    }
    .footer-text {
      font-size:9px;
      color:var(--muted);
    }
    .footer-brand {
      color:var(--secondary);
      font-weight:600;
    }
    .subjects-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      margin-bottom: 16px;
    }
    .subject-category {
      background: rgba(255,255,255,0.02);
      border-radius: 8px;
      padding: 12px;
      border: 1px solid rgba(255,255,255,0.05);
    }
    .category-title {
      font-size: 11px;
      font-weight: 700;
      color: var(--accent);
      margin: 0 0 8px 0;
      text-align: center;
    }
    .subjects-list {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .subject-checkbox {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 4px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 10px;
      color: #e6eef8;
      transition: all 0.3s ease;
    }
    .subject-checkbox:hover {
      background: rgba(124,58,237,0.1);
    }
    .subject-checkbox input[type="checkbox"] {
      display: none;
    }
    .checkmark {
      width: 16px;
      height: 16px;
      border: 2px solid var(--muted);
      border-radius: 3px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      flex-shrink: 0;
    }
    .subject-checkbox input[type="checkbox"]:checked + .checkmark {
      background: var(--accent);
      border-color: var(--accent);
    }
    .subject-checkbox input[type="checkbox"]:checked + .checkmark:after {
      content: "✓";
      color: white;
      font-size: 10px;
      font-weight: bold;
    }
    .selection-actions {
      display: flex;
      gap: 8px;
      justify-content: center;
      margin-bottom: 12px;
    }
    .submit-btn, .clear-btn {
      padding: 8px 16px;
      border: none;
      border-radius: 6px;
      font-size: 11px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .submit-btn {
      background: linear-gradient(135deg, var(--accent), #2563eb);
      color: white;
    }
    .submit-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(124,58,237,0.3);
    }
    .clear-btn {
      background: rgba(239,68,68,0.1);
      color: #ef4444;
      border: 1px solid rgba(239,68,68,0.3);
    }
    .clear-btn:hover {
      background: rgba(239,68,68,0.2);
    }
    .selected-count {
      text-align: center;
      font-size: 10px;
      color: var(--muted);
    }
    .complaint-section {
      margin-top: 16px;
      padding-top: 12px;
      border-top: 1px solid rgba(255,255,255,0.1);
      text-align: center;
    }
    .complaint-btn {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      background: linear-gradient(135deg, #f59e0b, #d97706);
      color: white;
      margin-bottom: 8px;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    .complaint-btn:hover {
      background: linear-gradient(135deg, #d97706, #b45309);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(245,158,11,0.3);
    }
    .complaint-text {
      font-size: 20px;
      color: var(--muted);
      margin: 0;
      line-height: 1.4;
    }
    .popup-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.8);
      backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    .popup-overlay.show {
      opacity: 1;
      visibility: visible;
    }
    .popup-modal {
      background: linear-gradient(135deg, rgba(11,18,32,0.95), rgba(15,23,36,0.95));
      border-radius: 16px;
      padding: 20px;
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      margin: 20px;
      border: 2px solid rgba(124,58,237,0.3);
      box-shadow: 0 30px 60px rgba(124,58,237,0.2);
      transform: scale(0.8) translateY(30px);
      transition: all 0.3s ease;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }
    .popup-overlay.show .popup-modal {
      transform: scale(1) translateY(0);
    }
    .popup-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
      padding-bottom: 12px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    .popup-title {
      font-size: 16px;
      font-weight: 700;
      color: var(--accent);
      margin: 0;
    }
    .close-popup {
      background: none;
      border: none;
      color: var(--muted);
      font-size: 18px;
      cursor: pointer;
      padding: 4px;
      border-radius: 4px;
      transition: all 0.3s ease;
    }
    .close-popup:hover {
      background: rgba(255,255,255,0.1);
      color: #ef4444;
    }
    .popup-content {
      flex: 1;
      overflow-y: auto;
      margin-bottom: 16px;
    }
    .popup-content::-webkit-scrollbar {
      width: 4px;
    }
    .popup-content::-webkit-scrollbar-track {
      background: rgba(255,255,255,0.05);
    }
    .popup-content::-webkit-scrollbar-thumb {
      background: var(--accent);
      border-radius: 2px;
    }
    .exam-date-item {
      background: var(--glass);
      border-radius: 8px;
      padding: 12px;
      margin-bottom: 8px;
      border: 1px solid rgba(255,255,255,0.05);
    }
    .exam-date-item:hover {
      background: rgba(124,58,237,0.05);
      border-color: rgba(124,58,237,0.2);
    }
    .exam-date-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }
    .exam-date {
      font-weight: 700;
      font-size: 12px;
      color: var(--accent);
    }
    .exam-day {
      font-size: 10px;
      color: var(--muted);
    }
    .exam-sessions {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .exam-session {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 6px 8px;
      border-radius: 4px;
      font-size: 10px;
    }
    .exam-session.morning {
      background: rgba(34,197,94,0.1);
      border: 1px solid rgba(34,197,94,0.2);
    }
    .exam-session.afternoon {
      background: rgba(59,130,246,0.1);
      border: 1px solid rgba(59,130,246,0.2);
    }
    .session-time {
      font-weight: 600;
      color: var(--success);
    }
    .afternoon .session-time {
      color: #60a5fa;
    }
    .session-subject {
      font-weight: 500;
      color: #e6eef8;
    }
    .popup-footer {
      display: flex;
      gap: 8px;
      justify-content: center;
      padding-top: 12px;
      border-top: 1px solid rgba(255,255,255,0.1);
    }
    .popup-btn {
      padding: 8px 16px;
      border: none;
      border-radius: 6px;
      font-size: 11px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .popup-btn:not(.close-btn) {
      background: var(--success);
      color: white;
    }
    .popup-btn:not(.close-btn):hover {
      background: #16a34a;
      transform: translateY(-1px);
    }
    .popup-btn.close-btn {
      background: rgba(255,255,255,0.1);
      color: var(--muted);
      border: 1px solid rgba(255,255,255,0.2);
    }
    .popup-btn.close-btn:hover {
      background: rgba(255,255,255,0.2);
      color: #e6eef8;
    }
    .popup-btn.download-btn {
      background: linear-gradient(135deg, #f59e0b, #d97706);
      color: white;
    }
    .popup-btn.download-btn:hover {
      background: linear-gradient(135deg, #d97706, #b45309);
      transform: translateY(-1px);
    }
    .popup-btn.download-btn:disabled {
      background: rgba(107, 114, 128, 0.5);
      cursor: not-allowed;
      transform: none;
    }
    .alert-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.6);
      backdrop-filter: blur(5px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10001;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    .alert-overlay.show {
      opacity: 1;
      visibility: visible;
    }
    .alert-modal {
      background: linear-gradient(135deg, rgba(11,18,32,0.95), rgba(15,23,36,0.95));
      border-radius: 16px;
      padding: 24px;
      max-width: 350px;
      width: 90%;
      margin: 20px;
      border: 2px solid rgba(124,58,237,0.3);
      box-shadow: 0 30px 60px rgba(124,58,237,0.2);
      transform: scale(0.8) translateY(30px);
      transition: all 0.3s ease;
      text-align: center;
    }
    .alert-overlay.show .alert-modal {
      transform: scale(1) translateY(0);
    }
    .alert-icon {
      font-size: 48px;
      margin-bottom: 16px;
      display: block;
    }
    .alert-title {
      font-size: 18px;
      font-weight: 700;
      color: #e6eef8;
      margin: 0 0 12px 0;
    }
    .alert-message {
      font-size: 14px;
      color: var(--muted);
      line-height: 1.5;
      margin-bottom: 20px;
    }
    .alert-actions {
      display: flex;
      gap: 12px;
      justify-content: center;
    }
    .alert-btn {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .alert-btn.primary {
      background: linear-gradient(135deg, var(--accent), #2563eb);
      color: white;
    }
    .alert-btn.primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(124,58,237,0.3);
    }
    .alert-btn.secondary {
      background: rgba(255,255,255,0.1);
      color: var(--muted);
      border: 1px solid rgba(255,255,255,0.2);
    }
    .alert-btn.secondary:hover {
      background: rgba(255,255,255,0.2);
      color: #e6eef8;
    }
    .whatsapp-section {
      background: linear-gradient(135deg, rgba(37,211,102,0.1), rgba(37,211,102,0.05));
      border-radius: 16px;
      padding: 20px;
      border: 1px solid rgba(37,211,102,0.2);
      text-align: center;
    }
    .wa-buttons {
      display: flex;
      gap: 12px;
      margin-bottom: 16px;
      flex-direction: column;
    }
    .wa-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      padding: 14px 20px;
      border-radius: 12px;
      color: white;
      font-weight: 700;
      border: 0;
      cursor: pointer;
      font-size: 14px;
      text-decoration: none;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    .wa-btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255,255,255,0.2);
      transition: all 0.3s ease;
      transform: translate(-50%,-50%);
    }
    .wa-btn:hover::before {
      width: 200px;
      height: 200px;
    }
    .wa-btn-chat {
      background: linear-gradient(135deg, var(--whatsapp), #22c55e);
      box-shadow: 0 4px 15px rgba(37,211,102,0.3);
    }
    .wa-btn-chat:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(37,211,102,0.4);
    }
    .wa-icon {
      width: 20px;
      height: 20px;
      fill: currentColor;
      position: relative;
      z-index: 1;
    }
    .btn-text {
      position: relative;
      z-index: 1;
    }
    .description {
      font-size: 13px;
      color: var(--muted);
      line-height: 1.5;
    }
    .subject-category:nth-child(6) {
      background: linear-gradient(135deg, rgba(139,92,246,0.15), rgba(79,70,229,0.1)) !important;
      border: 1px solid rgba(139,92,246,0.3) !important;
    }
    .subject-category:nth-child(6) .category-title {
      color: #8b5cf6 !important;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .subject-category:nth-child(6) .category-title::before {
      content: "🧪";
      font-size: 14px;
    }
    .subject-category:nth-child(6) .subject-checkbox:hover {
      background: rgba(139,92,246,0.2) !important;
    }
    .practical-section {
      margin: 20px 0;
      padding: 16px;
      background: rgba(139, 92, 246, 0.1);
      border: 1px solid rgba(139, 92, 246, 0.3);
      border-radius: 12px;
    }
    .practical-section h4 {
      color: #8b5cf6;
      margin: 0 0 12px;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 700;
    }
    .practical-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      background: rgba(139, 92, 246, 0.2);
      border-radius: 8px;
      margin: 4px 0;
      font-size: 12px;
      color: #e6eef8;
      border-left: 3px solid #8b5cf6;
    }
    .practical-item::before {
      content: "🔬";
      color: #8b5cf6;
    }
    .floating-contact-btn {
      position: fixed;
      bottom: 24px;
      right: 24px;
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--accent), #2563eb);
      color: white;
      border: none;
      font-size: 20px;
      box-shadow: 0 6px 20px rgba(124, 58, 237, 0.4);
      cursor: pointer;
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      animation: float 3s ease-in-out infinite;
    }
    .floating-contact-btn:hover {
      transform: scale(1.1) rotate(10deg);
      box-shadow: 0 8px 25px rgba(124, 58, 237, 0.6);
    }
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-8px); }
    }
    #contactPopup {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.8);
      backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.4s ease;
    }
    #contactPopup.show {
      opacity: 1;
      visibility: visible;
    }
    .contact-modal {
      background: linear-gradient(135deg, rgba(11,18,32,0.95), rgba(15,23,36,0.95));
      border-radius: 16px;
      padding: 24px;
      max-width: 480px;
      width: 90%;
      max-height: 85vh;
      margin: 20px;
      border: 2px solid rgba(124,58,237,0.3);
      box-shadow: 0 30px 60px rgba(124,58,237,0.2);
      transform: scale(0.9) translateY(20px);
      opacity: 0;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      overflow-y: auto;
      position: relative;
    }
    #contactPopup.show .contact-modal {
      transform: scale(1) translateY(0);
      opacity: 1;
    }
    .contact-header {
      text-align: center;
      margin-bottom: 20px;
    }
    .contact-header .logo {
      width: 60px;
      height: 60px;
      border-radius: 12px;
      background: linear-gradient(135deg, var(--accent), #2563eb);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 12px;
      font-size: 24px;
      color: white;
    }
    .contact-header h2 {
      font-size: 22px;
      font-weight: 700;
      margin: 0;
      background: linear-gradient(135deg, #e6eef8, #cbd5e1);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .contact-header p {
      font-size: 13px;
      color: var(--muted);
      margin-top: 4px;
    }
    .form-group {
      margin-bottom: 16px;
    }
    label {
      display: block;
      font-weight: 600;
      font-size: 13px;
      margin-bottom: 6px;
      color: #e6eef8;
    }
    input, textarea {
      width: 100%;
      padding: 12px 16px;
      background: var(--glass);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 10px;
      color: #e6eef8;
      font-size: 14px;
      transition: all 0.3s ease;
    }
    input:focus, textarea:focus {
      outline: none;
      border-color: var(--accent);
      background: rgba(124,58,237,0.05);
      box-shadow: 0 0 0 3px rgba(124,58,237,0.1);
    }
    textarea {
      resize: vertical;
      min-height: 100px;
    }
    .status-message {
      margin-top: 16px;
      padding: 12px;
      border-radius: 8px;
      font-size: 13px;
      text-align: center;
      opacity: 0;
      transform: translateY(10px);
      transition: all 0.3s ease;
    }
    .status-message.show {
      opacity: 1;
      transform: translateY(0);
    }
    .status-message.success {
      background: rgba(34,197,94,0.1);
      border: 1px solid rgba(34,197,94,0.3);
      color: var(--success);
    }
    .status-message.error {
      background: rgba(239,68,68,0.1);
      border: 1px solid rgba(239,68,68,0.3);
      color: #ef4444;
    }
    @media (max-width: 480px) {
      .floating-contact-btn {
        bottom: 16px;
        right: 16px;
        width: 50px;
        height: 50px;
        font-size: 18px;
      }
      .contact-modal {
        padding: 20px;
        margin: 10px;
      }
    }
  </style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <header>
      <div class="logo" id="mainLogo">
        <img src="https://i.ibb.co/jZJK1jqK/exam-bot-dp2.png" alt="Exam Icon" style="width: 60%; height: 60%; object-fit: contain;">
      </div>
      <h1>A/L & O/L Exam Countdown</h1>
      <p class="lead">Advanced Level & Ordinary Level Exam Countdown</p>
    </header>
    <div class="batch-selector">
      <button class="batch-btn active" data-batch="2025">📚 2025 A/L</button>
      <button class="batch-btn batch-btn-2026" data-batch="2026">🎯 2026 A/L</button>
      <button class="batch-btn batch-btn-2027" data-batch="2027">🎓 2027 A/L</button>
      <button class="batch-btn batch-btn-ol" data-batch="ol">📖 2025 O/L</button>
    </div>
  </div>
  <div id="section2025" class="countdown-section">
    <div class="card">
      <div class="status-bar">
        <div class="countdown-status">
          <div class="status-dot"></div>
          November 2025 Batch
        </div>
        <div style="font-size:10px;color:var(--muted);">
          <span id="lastUpdate2025">Live</span>   
        </div>
      </div>
      <div id="countdown2025" class="countdown">
        <div class="tile" id="daysTile2025">
          <div class="num" id="days2025">--</div>
          <div class="lbl">Days</div>
        </div>
        <div class="tile" id="hoursTile2025">
          <div class="num" id="hours2025">--</div>
          <div class="lbl">Hours</div>
        </div>
        <div class="tile" id="minutesTile2025">
          <div class="num" id="minutes2025">--</div>
          <div class="lbl">Minutes</div>
        </div>
        <div class="tile" id="secondsTile2025">
          <div class="num" id="seconds2025">--</div>
          <div class="lbl">Seconds</div>
        </div>
      </div>
      <div class="quote-section">
        <div class="quote-text" id="dailyQuote2025">Loading inspirational quote...</div>
        <div class="quote-number" id="quoteNumber2025"></div>
      </div>
      <div class="progress-section">
        <div class="progress-item">
          <div class="progress-info">
            <div class="progress-title">Days Passed</div>
            <div class="progress-subtitle">Since A/L 2025 preparation</div>
          </div>
          <div class="progress-value" id="daysPassed2025">0</div>
        </div>
      </div>
    </div>
  </div>
  <div id="section2026" class="countdown-section hidden">
    <div class="card card-2026">
      <div class="status-bar">
        <div class="countdown-status countdown-status-2026">
          <div class="status-dot status-dot-2026"></div>
          August 2026 Batch
        </div>
        <div style="font-size:10px;color:var(--muted);">
          <span id="lastUpdate2026">Live</span>
        </div>
      </div>
      <div id="countdown2026" class="countdown">
        <div class="tile tile-2026" id="daysTile2026">
          <div class="num" id="days2026">--</div>
          <div class="lbl">Days</div>
        </div>
        <div class="tile tile-2026" id="hoursTile2026">
          <div class="num" id="hours2026">--</div>
          <div class="lbl">Hours</div>
        </div>
        <div class="tile tile-2026" id="minutesTile2026">
          <div class="num" id="minutes2026">--</div>
          <div class="lbl">Minutes</div>
        </div>
        <div class="tile tile-2026" id="secondsTile2026">
          <div class="num" id="seconds2026">--</div>
          <div class="lbl">Seconds</div>
        </div>
      </div>
      <div class="quote-section quote-section-2026">
        <div class="quote-text" id="dailyQuote2026">Loading inspirational quote...</div>
        <div class="quote-number quote-number-2026" id="quoteNumber2026"></div>
      </div>
      <div class="progress-section">
        <div class="progress-item">
          <div class="progress-info">
            <div class="progress-title">Days Passed</div>
            <div class="progress-subtitle">Since A/L 2026 preparation</div>
          </div>
          <div class="progress-value progress-value-2026" id="daysPassed2026">0</div>
        </div>
      </div>
    </div>
  </div>
  <div id="section2027" class="countdown-section hidden">
    <div class="card card-2027">
      <div class="status-bar">
        <div class="countdown-status countdown-status-2027">
          <div class="status-dot status-dot-2027"></div>
          August 2027 Batch
        </div>
        <div style="font-size:10px;color:var(--muted);">
          <span id="lastUpdate2027">Live</span>
        </div>
      </div>
      <div id="countdown2027" class="countdown">
        <div class="tile tile-2027" id="daysTile2027">
          <div class="num" id="days2027">--</div>
          <div class="lbl">Days</div>
        </div>
        <div class="tile tile-2027" id="hoursTile2027">
          <div class="num" id="hours2027">--</div>
          <div class="lbl">Hours</div>
        </div>
        <div class="tile tile-2027" id="minutesTile2027">
          <div class="num" id="minutes2027">--</div>
          <div class="lbl">Minutes</div>
        </div>
        <div class="tile tile-2027" id="secondsTile2027">
          <div class="num" id="seconds2027">--</div>
          <div class="lbl">Seconds</div>
        </div>
      </div>
      <div class="quote-section quote-section-2027">
        <div class="quote-text" id="dailyQuote2027">Loading inspirational quote...</div>
        <div class="quote-number quote-number-2027" id="quoteNumber2027"></div>
      </div>
      <div class="progress-section">
        <div class="progress-item">
          <div class="progress-info">
            <div class="progress-title">Days Passed</div>
            <div class="progress-subtitle">Since A/L 2027 preparation</div>
          </div>
          <div class="progress-value progress-value-2027" id="daysPassed2027">0</div>
        </div>
      </div>
    </div>
  </div>
  <div id="sectionOL" class="countdown-section hidden">
    <div class="card card-ol">
      <div class="status-bar">
        <div class="countdown-status countdown-status-ol">
          <div class="status-dot status-dot-ol"></div>
          December 2026 O/L Batch
        </div>
        <div style="font-size:10px;color:var(--muted);">
          <span id="lastUpdateOL">Live</span>
        </div>
      </div>
      <div id="countdownOL" class="countdown">
        <div class="tile tile-ol" id="daysTileOL">
          <div class="num" id="daysOL">--</div>
          <div class="lbl">Days</div>
        </div>
        <div class="tile tile-ol" id="hoursTileOL">
          <div class="num" id="hoursOL">--</div>
          <div class="lbl">Hours</div>
        </div>
        <div class="tile tile-ol" id="minutesTileOL">
          <div class="num" id="minutesOL">--</div>
          <div class="lbl">Minutes</div>
        </div>
        <div class="tile tile-ol" id="secondsTileOL">
          <div class="num" id="secondsOL">--</div>
          <div class="lbl">Seconds</div>
        </div>
      </div>
      <div class="quote-section quote-section-ol">
        <div class="quote-text" id="dailyQuoteOL">Loading inspirational quote...</div>
        <div class="quote-number quote-number-ol" id="quoteNumberOL"></div>
      </div>
      <div class="progress-section">
        <div class="progress-item">
          <div class="progress-info">
            <div class="progress-title">Days Passed</div>
            <div class="progress-subtitle">Since O/L 2025 preparation</div>
          </div>
          <div class="progress-value progress-value-ol" id="daysPassedOL">0</div>
        </div>
      </div>
    </div>
  </div>
  <div id="subjectSelectionCard" class="card">
    <div style="text-align: center; margin-bottom: 16px;">
      <h3 style="font-size: 16px; color: var(--accent); margin: 0 0 8px;">A/L 2025 Subject Selection</h3>
      <p style="font-size: 11px; color: var(--muted); margin: 0;">කාල සටහනට ඔනි විශයන් ටික දලා සිලෙක්ට් කරගන්න</p>
    </div>
    <div class="subjects-grid">
      <div class="subject-category">
        <h4 class="category-title">Mathematics</h4>
        <div class="subjects-list">
          <label class="subject-checkbox">
            <input type="checkbox" value="combined-math-1,combined-math-2" data-name="Combined Mathematics">
            <span class="checkmark"></span>
            <span>Combined Mathematics</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="higher-mathematics-1,higher-mathematics-2" data-name="Higher Mathematics">
            <span class="checkmark"></span>
            <span>Higher Mathematics</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="chemistry-1,chemistry-2" data-name="Chemistry">
            <span class="checkmark"></span>
            <span>Chemistry</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="ict-1,ict-2" data-name="ICT">
            <span class="checkmark"></span>
            <span>ICT</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="physics-1,physics-2" data-name="Physics">
            <span class="checkmark"></span>
            <span>Physics</span>
          </label>
        </div>
      </div>
      <div class="subject-category">
        <h4 class="category-title">Science</h4>
        <div class="subjects-list">
          <label class="subject-checkbox">
            <input type="checkbox" value="biology-1,biology-2" data-name="Biology">
            <span class="checkmark"></span>
            <span>Biology</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="chemistry-1,chemistry-2" data-name="Chemistry">
            <span class="checkmark"></span>
            <span>Chemistry</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="physics-1,physics-2" data-name="Physics">
            <span class="checkmark"></span>
            <span>Physics</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="agricultural-science-1,agricultural-science-2" data-name="Agricultural Science">
            <span class="checkmark"></span>
            <span>Agricultural Science</span>
          </label>
        </div>
      </div>
      <div class="subject-category">
        <h4 class="category-title">Arts</h4>
        <div class="subjects-list">
          <label class="subject-checkbox">
            <input type="checkbox" value="media-studies-1,media-studies-2" data-name="Media Studies">
            <span class="checkmark"></span>
            <span>Media Studies</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="sinhala-1,sinhala-2" data-name="Sinhala">
            <span class="checkmark"></span>
            <span>Sinhala</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="history-sri-lanka" data-name="History of Sri Lanka">
            <span class="checkmark"></span>
            <span>History of Sri Lanka</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="buddhism-1,buddhism-2" data-name="Buddhism">
            <span class="checkmark"></span>
            <span>Buddhism</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="geography-1,geography-2" data-name="Geography">
            <span class="checkmark"></span>
            <span>Geography</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="political-science-1,political-science-2" data-name="Political Science">
            <span class="checkmark"></span>
            <span>Political Science</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="home-economics-1,home-economics-2" data-name="Home Economics">
            <span class="checkmark"></span>
            <span>Home Economics</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="logic-1,logic-2" data-name="Logic">
            <span class="checkmark"></span>
            <span>Logic</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="k-1,k-2" data-name="Korean">
            <span class="checkmark"></span>
            <span>Korean</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="j-1,j-2" data-name="Japanese">
            <span class="checkmark"></span>
            <span>Japanese</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="el-1,el-2" data-name="English Literature">
            <span class="checkmark"></span>
            <span>English Literature</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="f-1,f-2" data-name="French">
            <span class="checkmark"></span>
            <span>French</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="art-1,art-2" data-name="Art">
            <span class="checkmark"></span>
            <span>Art</span>
          </label>
        </div>
      </div>
      <div class="subject-category">
        <h4 class="category-title">Commerce</h4>
        <div class="subjects-list">
          <label class="subject-checkbox">
            <input type="checkbox" value="business-studies-1,business-studies-2" data-name="Business Studies">
            <span class="checkmark"></span>
            <span>Business Studies</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="economics-1,economics-2" data-name="Economics">
            <span class="checkmark"></span>
            <span>Economics</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="accounting-1,accounting-2" data-name="Accounting">
            <span class="checkmark"></span>
            <span>Accounting</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="ict-1,ict-2" data-name="ICT">
            <span class="checkmark"></span>
            <span>ICT</span>
          </label>
        </div>
      </div>
      <div class="subject-category">
        <h4 class="category-title">Technology</h4>
        <div class="subjects-list">
          <label class="subject-checkbox">
            <input type="checkbox" value="ict-1,ict-2" data-name="ICT">
            <span class="checkmark"></span>
            <span>ICT</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="engineering-tech-1,engineering-tech-2" data-name="Engineering Technology">
            <span class="checkmark"></span>
            <span>Engineering Technology</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="bio-systems-tech-1,bio-systems-tech-2" data-name="Bio Systems Technology">
            <span class="checkmark"></span>
            <span>Bio Systems Technology</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="science-for-tech-1,science-for-tech-2" data-name="Science for Technology">
            <span class="checkmark"></span>
            <span>Science for Technology</span>
          </label>
        </div>
      </div>
      <div class="subject-category">
        <h4 class="category-title">Common subject</h4>
        <div class="subjects-list">
          <label class="subject-checkbox">
            <input type="checkbox" value="general-english-1,general-english-2" data-name="General English">
            <span class="checkmark"></span>
            <span>General English</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="common-general-test" data-name="Common General Test">
            <span class="checkmark"></span>
            <span>Common General Test</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="m-1,m-2" data-name="Maths">
            <span class="checkmark"></span>
            <span>Maths</span>
          </label>
        </div>
      </div>
      <div class="subject-category">
        <h4 class="category-title">🧪 Practical Exams</h4>
        <div class="subjects-list">
          <label class="subject-checkbox">
            <input type="checkbox" value="bst" data-name="Bio Systems Technology Practical">
            <span class="checkmark"></span>
            <span>Bio Systems Technology Practical</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="et" data-name="Engineering Technology Practical">
            <span class="checkmark"></span>
            <span>Engineering Technology Practical</span>
          </label>
          <label class="subject-checkbox">
            <input type="checkbox" value="home-economics-practical" data-name="Home Economics Practical">
            <span class="checkmark"></span>
            <span>Home Economics Practical</span>
          </label>
        </div>
      </div>
    </div>
    <div class="selected-count" id="selectedCount">0 subjects selected</div>
    <div class="selection-actions">
      <button class="submit-btn" onclick="showMyExamDates()">Show My Exam Dates</button>
      <button class="clear-btn" onclick="clearSelection()">Clear All</button>
    </div>
    <div class="complaint-section">
      <button class="complaint-btn" onclick="openComplaintWhatsApp()">📝 Report Complain</button>
      <p class="complaint-text">ඔයාගේ විශයක් නැතිනම් හෝ වේලාව වෙනස් නම් හෝ කම්ප්ලේන් එකක් දාන්න<br>
      අලුත් වෙන්න ඔනි දෙවල් ඔනිම දෙයක් කියන්න </p>
    </div>
  </div>
  <div class="card whatsapp-section">
    <div class="wa-buttons">
      <button id="waChat" class="wa-btn wa-btn-chat">
        <svg class="wa-icon" viewBox="0 0 24 24">
          <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.150-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.040 1.016-1.040 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.200 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.360.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"/>
        </svg>
        <span class="btn-text">💬 Connect WhatsApp Bot</span>
      </button>
    </div>
    <div class="description">
      <span style="font-weight:bold; color:white;">✨📚 A/L Exam Countdown Bot 📚✨</span><br><br>
      <span style="font-weight:bold; color:white;">⏳ A/L විභාගයට ඔබට තව දවස් කීයක්ද තිබෙන්නේ කියලා real-time දැන ගන්න පුළුවන් smart bot 💡</span><br><br>
      🚀 <span style="font-weight:bold; color:white;">බොට් ව ස්ටාර්ට් කරන්න:</span> 
      <span style="font-weight:bold; color:red;">Hi 👋</span><br><br>
      <ul>
        <li><span style="font-weight:bold; color:white;">✅ Daily countdown reminders + motivational quotes 🔔</span></li>
        <li><span style="font-weight:bold; color:white;">📊 Study progress tracking & achievements</span></li>
        <li><span style="font-weight:bold; color:white;">🔒 Safe & instant – A/L target එක keep track කරන්න easy way!</span></li>
      </ul>
      <br>
     <h3></h3> 🎯 <strong> හැමදාම උදේට මැසෙජ් එකක් ගන්න පුලුවන් </strong> 🟢<br><h3></h3>
    </div>
  </div>
  <div id="examDatesPopup" class="popup-overlay">
    <div class="popup-modal">
      <div class="popup-header">
        <h3 class="popup-title">My Exam Schedule</h3>
        <button class="close-popup" onclick="closeExamDatesPopup()">×</button>
      </div>
      <div class="popup-content">
        <div id="examDatesList"></div>
      </div>
      <div class="popup-footer">
        <button class="popup-btn" onclick="copyMySchedule()">Copy Schedule</button>
        <button class="popup-btn download-btn" onclick="downloadScheduleImage()">📷 Download Image</button>
        <button class="popup-btn close-btn" onclick="closeExamDatesPopup()">Close</button>
      </div>
    </div>
  </div>
  <div id="alertPopup" class="alert-overlay">
    <div class="alert-modal">
      <div class="alert-icon" id="alertIcon">⏰</div>
      <h3 class="alert-title" id="alertTitle">Message</h3>
      <p class="alert-message" id="alertMessage">This is a message</p>
      <div class="alert-actions">
        <button class="alert-btn primary" onclick="closeAlert()">OK</button>
      </div>
    </div>
  </div>
  <div class="footer">
    <div class="footer-text">
      Powered by <span class="footer-brand">Sadeepa & Shamika</span> • 
      <span id="currentTime"></span>
    </div>
  </div>
</div>

<button id="contactBtn" class="floating-contact-btn">📧</button>

<div id="contactPopup" class="popup-overlay">
  <div class="contact-modal">
    <button class="close-popup" onclick="closeContactPopup()">×</button>
    <div class="contact-header">
      <div class="logo">📧</div>
      <h2>Get In Touch</h2>
      <p>We'd love to hear from you</p>
    </div>
    <form id="contactForm">
      <input type="hidden" name="access_key" value="fd9a9424-521d-4b92-951d-bd41f19f7898">
      <div class="form-group">
        <label for="name">Full Name *</label>
        <input type="text" id="name" name="name" required placeholder="sadeepa">
      </div>
      <div class="form-group">
        <label for="email">Email Address *</label>
        <input type="email" id="email" name="email" required placeholder="sadeepa@example.com">
      </div>
      <div class="form-group">
        <label for="subject">Subject *</label>
        <input type="text" id="subject" name="subject" required placeholder="How can we help?">
      </div>
      <div class="form-group">
        <label for="message">Message *</label>
        <textarea id="message" name="message" required placeholder="Tell us more..."></textarea>
      </div>
      <button type="submit" class="submit-btn" id="submitBtn">Send Message</button>
    </form>
    <div id="statusMessage" class="status-message"></div>
  </div>
</div>
<div id="notificationModal" class="popup-overlay">
  <div class="popup-modal" style="max-width: 400px;">
    <div class="popup-header">
      <h3 class="popup-title">🔔 Enable Daily Notifications</h3>
    </div>
    <div class="popup-content" style="text-align: center; padding: 20px 0;">
      <div style="font-size: 48px; margin-bottom: 16px;">⏰</div>
      <p style="font-size: 14px; color: #e6eef8; margin-bottom: 12px; line-height: 1.6;">
        දිනපතා උදේ <strong style="color: var(--accent);">4.00 ට</strong> විභාග countdown එක ඔබගේ device එකට notification එකක් විදිහට එවන්න දෙන්නද?
      </p>
      <p style="font-size: 12px; color: var(--muted); margin-bottom: 20px;">
        විභාගයට ඉතිරි දින ගණන සහ motivational message එකක් හැමදාම ලැබෙනවා! 🎯
      </p>
      <div style="background: rgba(124,58,237,0.1); padding: 12px; border-radius: 8px; margin-bottom: 20px;">
        <p style="font-size: 11px; color: var(--muted); margin: 0;">
          ⚠️ Notification permission අවශ්‍යයි. Browser එකෙන් අනුමැතිය ඉල්ලා සිටින විට "Allow" click කරන්න.
        </p>
      </div>
    </div>
    <div class="popup-footer">
      <button class="popup-btn" onclick="enableNotifications()" style="flex: 1;">
        ✅ Enable Notifications
      </button>
      <button class="popup-btn close-btn" onclick="closeNotificationModal()">
        Maybe Later
      </button>
    </div>
  </div>
</div>

<script>
  document.addEventListener('keydown', function(e) {
    if (e.key === 'F12') {
      e.preventDefault();
      return false;
    }
    if (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'C')) {
      e.preventDefault();
      return false;
    }
    if (e.ctrlKey && e.key === 'u') {
      e.preventDefault();
      return false;
    }
  });
  if (window.location.href.toLowerCase().includes('view-source:')) {
    window.location.href = 'https://www.google.com';
  }
  document.addEventListener('contextmenu', function(e) {
    e.preventDefault();
    return false;
  });

  function openContactPopup() {
    document.getElementById('contactPopup').classList.add('show');
    document.body.style.overflow = 'hidden';
  }

  function closeContactPopup() {
    document.getElementById('contactPopup').classList.remove('show');
    document.body.style.overflow = '';
  }

  document.getElementById('contactBtn').addEventListener('click', openContactPopup);
  document.getElementById('contactPopup').addEventListener('click', function(e) {
    if (e.target === this) closeContactPopup();
  });

  const targetDate2025 = new Date('2025-11-10T00:00:00');
  const targetDate2026 = new Date('2026-08-10T00:00:00');
  const targetDate2027 = new Date('2027-08-10T00:00:00');
  const targetDateOL = new Date('2026-02-17T00:00:00');
  const studyStartDate2025 = new Date('2024-01-01');
  const studyStartDate2026 = new Date('2025-01-01');
  const studyStartDate2027 = new Date('2026-01-01');
  const studyStartDateOL = new Date('2023-06-01');
  let currentBatch = '2025';

  const quotes = {
    "01": "ජීවිතය එය මත රඳා පවතිනවාක් මෙන් ඔබේ සිහින හඹා යන්න ✨",
    "02": "සාර්ථකත්වය කව්රුත් ලබා දෙන්නේ නැත, එබැවින් එය උපයා ගැනීමට උත්සාහ කරන්න! 🌟",
    "03": "ඔබට හැකි බව විශ්වාස කරන්න 🌟",
    "04": "ගමන දුෂ්කර විය හැක, නමුත් ඉහළින් ඇති දසුන සුන්දර වනු ඇත 🏔",
    "05": "ඕනෑම බාධකයකට වඩා විශාල දෙයක් ඔබ තුළ ඇති බව විශ්වාස කරන්න 💫",
    "06": "ඔබ දන්නා ප්‍රමාණයට වඩා ඔබට හැකියාව ඇත 🍀⭐️",
    "07": "අභියෝග ජීවිතය රසවත් කරයි. ඒවා ජය ගැනීම ජීවිතය අර්ථවත් කරයි 🔥💫",
    "08": "සෑම දිනකම ඔබට දියුණු වීමට නව අවස්ථාවක් වේ. එය රැගෙන එයින් උපරිම ප්‍රයෝජන ගන්න 😎💪",
    "09": "සෑම දුෂ්කරතාවක්ම මැද අවස්ථාවක් තිබේ 🤛",
    "10": "ජයග්‍රහණයේ උද්යෝගයට වඩා පරාජයේ බිය වැඩි වීමට ඉඩ නොදෙන්න 🫵",
    "11": "නොවැම්බර් 2025 ඔබේ ජයග්‍රහණයේ මාසයයි! සූදානම් වන්න 🎯",
    "12": "A/L 2025 සිසුවෙකු ලෙස ඔබ අද ඉතිහාසයක් රචනා කරනවා 📚",
    "13": "කාලය සීමිතයි, නමුත් ඔබේ හැකියාව අසීමිතයි 🚀",
    "14": "පිටු අධ්‍යයනය කිරීම නොවෙයි, අර්ථය අවබෝධ කර ගැනීමයි වැදගත් 🧠",
    "15": "සෑම විභාගයකම ඔබේ අනාගතයේ දොරක් විවෘත වේ 🚪✨"
  };

  const quotes2026 = {
    "01": "අනාගතය ඔබට අයත්! මේ මොහොතේ සිට පටන් ගන්න ✨",
    "02": "2026 A/L ජයග්‍රහණය සඳහා ඔබේ ගමන ආරම්භ කරන්න! 🎯",
    "03": "සාර්ථකත්වයට කාලය තිබේ, නමුත් කුසලතාව අවශ්‍යයි 🌟",
    "04": "ඔබේ ඉලක්කය 2026, නමුත් ඔබේ සූදානම අදම ආරම්භ කරන්න 🚀",
    "05": "මීට වර්ෂයකට වඩා කාලයක් තිබේ, නමුත් සෑම දිනකම වැදගත් 💫",
    "06": "2026 batch එකේ champion කෙනෙක් වන්න! 🏆",
    "07": "වැඩි කාලයක් = වැඩි හැකියාවන්. එය නිසියාකාරව භාවිතා කරන්න 📚",
    "08": "ඔබේ අනාගතය ඔබේ අතේ. 2026 ජයග්‍රහණය කරන්න! 🔥",
    "09": "සෑම දිනකම අද වඳා හොඳ කෙනෙක් වන්න. 2026 සඳහා සූදානම් වන්න ⭐",
    "10": "කාලය ඔබේ මිත්‍රයා. එය නිසියාකාරව පරිහරණය කරන්න 💪",
    "11": "2026 අගෝස්තු මාසය ඔබේ ජයග්‍රහණයේ මාසයයි! 🎯",
    "12": "අද ආරම්භ කරන අධ්‍යයනය හෙට විශ්වවිද්‍යාලයේ අවස්ථාව බවට පත්වේ 🎓",
    "13": "කාලය ඔබේ පාර්ශ්වයේ ඇත. හොඳින් සැලසුම් කරන්න 📋",
    "14": "ප්‍රබල මූලික පදනමක් තනා ගන්න. A/L සඳහා ඒක වැදගත් 🏗️",
    "15": "සෑම විභාගයකටම සූදානම් වන්න, නමුත් 2026 A/L ප්‍රමුඛත්වය දෙන්න 🥇"
  };

  const quotes2027 = {
    "01": "ප්‍රථම පියවර තමයි වඩාම වැදගත්! ආරම්භ කරන්න 🎯",
    "02": "2027 A/L සඳහා දිගු ගමනක් ආරම්භ කරන්න. සෑම පියවරකම වැදගත් ✨",
    "03": "අවුරුදු දෙකක් කාලයක් ඇත - මෙය ඔබේ හොඳම වාසියයි! 🌟",
    "04": "මුල සිටම සැලසුම් කරන්න. 2027 ජයග්‍රහණය අද ආරම්භ වේ! 📋",
    "05": "කාලය ඔබේ පාර්ශ්වයේ ඇත. එය සාර්ථකව භාවිතා කරන්න ⏰",
    "06": "සෑම දිනකම ඉදිරියට පියවරක්. 2027 ඔබේ වර්ෂයයි! 🚀",
    "07": "දිගු ගමන අඩු වේගයෙන් ගත යුතුයි. ස්ථායී වන්න 🐢",
    "08": "අනාගත ජයග්‍රාහකයා අදම ආරම්භ කරයි 🏆",
    "09": "වර්ෂ දෙකක කාලය = අනන්ත හැකියාවන්. ඒවා පරිහරණය කරන්න 💎",
    "10": "2027 A/L batch ප්‍රමුඛයා වන්න! ඔබට පුළුවන් 👑",
    "11": "කාලය ප්‍රමාණවත්, නමුත් සැලසුම් අත්‍යවශ්‍යයි 📅",
    "12": "මුල සිට හොඳ පුරුදු ගොඩ නගන්න. ඒක 2027 දක්වා උදව් කරයි 🌱",
    "13": "දිගු කාලයක් තිබෙනවා කියලා කල් දාන්න එපා ⚠️",
    "14": "සෑම දිනකම අලුත් දෙයක් ඉගෙන ගන්න. කාලය අනගිණ නෑ 📚",
    "15": "2027 අගෝස්තු වන විටට ඔබ සම්පූර්ණයෙන් සූදානම් වී සිටිය යුතුයි 🎯"
  };

  const quotesOL = {
    "01": "O/L තමයි ඔබේ අනාගතේ පදනම! දැන්ම ආරම්භ කරන්න 📚",
    "02": "හොඳ මූලික පදනමක් A/L සඳහා වැදගත්. O/L වලින් ජයගන්න! 🎯",
    "03": "සාමාන්‍ය පෙර විභාගය - ඔබේ සාර්ථකත්වයේ ප්‍රථම පියවර ✨",
    "04": "O/L ප්‍රතිඵල හොඳ නම්, A/L වලට සූදානම් වීම පහසු වේ 🌟",
    "05": "සෑම විෂයකටම සමාන අවධානයක් දෙන්න. O/L වල සියල්ල වැදගත් 📖",
    "06": "2026 O/L batch ප්‍රමුඛයා වන්න! ඔබේ කාලයයි 🏆",
    "07": "ප්‍රථම වරට සම්මත වෙන්න. නැවත සඳුදා තරගයක් නොවේ 💪",
    "08": "O/L සාර්ථකත්වය A/L සාර්ථකත්වයට මග පාදයි 🚀",
    "09": "අධ්‍යාපන ගමනේ පළමු විශාල ජයග්‍රහණය O/L තුලින් ආරම්භ වේ 🎊",
    "10": "හොඳ ප්‍රතිපලයක් ලබා ගෙන ඔබේ පවුලේ ගෞරවය වර්ධනය කරන්න 💎",
    "11": "O/L සම්මත වීම අනිවාර්යයි, A/L යාම අභිලාෂයයි 🎓",
    "12": "9 විෂයකටම සමානව අවධානය දෙන්න. සියල්ල වැදගත් ⚖️",
    "13": "2026 පෙබරවාරි මාසය ඔබේ පළමු විශාල ජයග්‍රහණයේ මාසයයි 🎯",
    "14": "grade 6-9 දක්වා ඉගෙන ගත් සියල්ල O/L වලට අදාළයි 📝",
    "15": "පරීක්ෂණ ප්‍රශ්න වලට වැඩිපුර කාලය වෙන් කරන්න 🔬"
  };

  function showAlert(icon, title, message, callback = null) {
    document.getElementById('alertIcon').textContent = icon;
    document.getElementById('alertTitle').textContent = title;
    document.getElementById('alertMessage').textContent = message;
    const alertPopup = document.getElementById('alertPopup');
    alertPopup.classList.add('show');
    document.body.style.overflow = 'hidden';
    window.alertCallback = callback;
  }

  function closeAlert() {
    const alertPopup = document.getElementById('alertPopup');
    alertPopup.classList.remove('show');
    document.body.style.overflow = '';
    if (window.alertCallback) {
      window.alertCallback();
      window.alertCallback = null;
    }
  }

  function switchBatch(batch) {
    currentBatch = batch;
    document.querySelectorAll('.batch-btn').forEach(btn => {
      btn.classList.remove('active');
    });
    document.querySelector(`[data-batch="${batch}"]`).classList.add('active');
    document.getElementById('section2025').classList.toggle('hidden', batch !== '2025');
    document.getElementById('section2026').classList.toggle('hidden', batch !== '2026');
    document.getElementById('section2027').classList.toggle('hidden', batch !== '2027');
    document.getElementById('sectionOL').classList.toggle('hidden', batch !== 'ol');
    const subjectCard = document.getElementById('subjectSelectionCard');
    if (batch === '2025') {
      subjectCard.classList.remove('hidden');
    } else {
      subjectCard.classList.add('hidden');
    }
    const mainLogo = document.getElementById('mainLogo');
    mainLogo.className = 'logo';
    switch(batch) {
      case '2027':
        mainLogo.classList.add('logo-2027');
        showAlert('🎓', '2027 A/L Batch', '2027 අයගේ තාම දින නිකුත් කරලා නෑ. 2027.08.10 වෙනි දිනට දින සකස් කර ඇත නිකුත් කල පසු අප්ඩෙට් කරන්නම්');
        break;
      case 'ol':
        mainLogo.classList.add('logo-ol');
        break;
    }
    updateCountdown();
    getDailyQuote();
  }

  document.querySelectorAll('.batch-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      switchBatch(btn.dataset.batch);
    });
  });

  function getDailyQuote() {
    const today = new Date();
    const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / 1000 / 60 / 60 / 24);
    let quoteSet, batchSuffix;
    switch(currentBatch) {
      case '2025':
        quoteSet = quotes;
        batchSuffix = '2025';
        break;
      case '2026':
        quoteSet = quotes2026;
        batchSuffix = '2026';
        break;
      case '2027':
        quoteSet = quotes2027;
        batchSuffix = '2027';
        break;
      case 'ol':
        quoteSet = quotesOL;
        batchSuffix = 'OL';
        break;
    }
    const quoteKeys = Object.keys(quoteSet);
    const quoteIndex = (dayOfYear - 1) % quoteKeys.length;
    const quoteKey = quoteKeys[quoteIndex];
    const quoteElement = document.getElementById(`dailyQuote${batchSuffix}`);
    const quoteNumberElement = document.getElementById(`quoteNumber${batchSuffix}`);
    if (quoteElement && quoteNumberElement) {
      quoteElement.textContent = quoteSet[quoteKey];
      const examType = currentBatch === 'ol' ? 'O/L' : 'A/L';
      const year = currentBatch === 'ol' ? '2026' : currentBatch;
      quoteNumberElement.textContent = `Quote #${quoteKey} • ${examType} ${year} • ${today.toLocaleDateString()}`;
    }
  }

  function addTileAnimation(tileId) {
    const tile = document.getElementById(tileId);
    if (tile) {
      tile.classList.add('tile-animate');
      setTimeout(() => tile.classList.remove('tile-animate'), 2000);
    }
  }

  function updateCountdown() {
    const now = new Date();
    const batches = [
      { year: '2025', target: targetDate2025, studyStart: studyStartDate2025 },
      { year: '2026', target: targetDate2026, studyStart: studyStartDate2026 },
      { year: '2027', target: targetDate2027, studyStart: studyStartDate2027 },
      { year: 'OL', target: targetDateOL, studyStart: studyStartDateOL }
    ];
    batches.forEach(batch => {
      let diff = batch.target - now;
      if(diff < 0) diff = 0;
      const secs = Math.floor(diff/1000) % 60;
      const mins = Math.floor(diff/1000/60) % 60;
      const hrs = Math.floor(diff/1000/60/60) % 24;
      const days = Math.floor(diff/1000/60/60/24);
      const newValues = {
        [`days${batch.year}`]: String(days).padStart(2,'0'),
        [`hours${batch.year}`]: String(hrs).padStart(2,'0'),
        [`minutes${batch.year}`]: String(mins).padStart(2,'0'),
        [`seconds${batch.year}`]: String(secs).padStart(2,'0')
      };
      Object.keys(newValues).forEach(key => {
        const element = document.getElementById(key);
        if (element && element.textContent !== newValues[key]) {
          element.textContent = newValues[key];
          const tileId = key.replace(key.slice(-4), `Tile${batch.year}`);
          addTileAnimation(tileId);
        }
      });
      const daysPassed = Math.floor((now - batch.studyStart) / (1000 * 60 * 60 * 24));
      const daysPassedElement = document.getElementById(`daysPassed${batch.year}`);
      if (daysPassedElement) {
        daysPassedElement.textContent = Math.max(0, daysPassed);
      }
    });
  }

  function updateCurrentTime() {
    const now = new Date();
    const timeString = now.toLocaleTimeString('en-US', {
      hour12: false,
      hour: '2-digit',
      minute: '2-digit'
    });
    document.getElementById('currentTime').textContent = timeString;
  }

  function initializeApp() {
    getDailyQuote();
    updateCountdown();
    updateCurrentTime();
  }

  setInterval(updateCountdown, 1000);
  setInterval(updateCurrentTime, 1000);
  setInterval(getDailyQuote, 3600000);

  const examScheduleData = {
    'combined-math-1': { date: '2025-11-10', time: '08:30-11:40', session: 'morning', subject: 'Combined Mathematics I' },
    'combined-math-2': { date: '2025-11-12', time: '08:30-11:40', session: 'morning', subject: 'Combined Mathematics II' },
    'higher-mathematics-1': { date: '2025-12-01', time: '08:30-11:40', session: 'morning', subject: 'Higher Mathematics I' },
    'higher-mathematics-2': { date: '2025-12-05', time: '08:30-11:40', session: 'morning', subject: 'Higher Mathematics II' },
    'physics-1': { date: '2025-11-14', time: '08:30-10:30', session: 'morning', subject: 'Physics I' },
    'physics-2': { date: '2025-11-17', time: '08:30-11:40', session: 'morning', subject: 'Physics II' },
    'chemistry-1': { date: '2025-11-19', time: '08:30-10:30', session: 'morning', subject: 'Chemistry I' },
    'chemistry-2': { date: '2025-11-21', time: '08:30-11:40', session: 'morning', subject: 'Chemistry II' },
    'biology-1': { date: '2025-11-10', time: '13:00-15:00', session: 'afternoon', subject: 'Biology I' },
    'biology-2': { date: '2025-11-11', time: '13:00-16:10', session: 'afternoon', subject: 'Biology II' },
    'agricultural-science-1': { date: '2025-11-13', time: '13:00-15:00', session: 'afternoon', subject: 'Agricultural Science I' },
    'agricultural-science-2': { date: '2025-11-15', time: '13:00-16:10', session: 'afternoon', subject: 'Agricultural Science II' },
    'ict-1': { date: '2025-11-27', time: '13:00-15:00', session: 'afternoon', subject: 'Information & Communication Technology I' },
    'ict-2': { date: '2025-11-29', time: '08:30-11:40', session: 'morning', subject: 'Information & Communication Technology II' },
    'engineering-tech-1': { date: '2025-11-12', time: '13:00-15:00', session: 'afternoon', subject: 'Engineering Technology I' },
    'engineering-tech-2': { date: '2025-11-14', time: '14:00-17:10', session: 'afternoon', subject: 'Engineering Technology II' },
    'bio-systems-tech-1': { date: '2025-11-12', time: '13:00-15:00', session: 'afternoon', subject: 'Bio Systems Technology I' },
    'bio-systems-tech-2': { date: '2025-11-14', time: '14:00-17:10', session: 'afternoon', subject: 'Bio Systems Technology II' },
    'science-for-tech-1': { date: '2025-11-19', time: '08:30-11:40', session: 'morning', subject: 'Science for Technology I' },
    'science-for-tech-2': { date: '2025-11-21', time: '08:30-11:40', session: 'morning', subject: 'Science for Technology II' },
    'business-studies-1': { date: '2025-11-13', time: '08:30-10:30', session: 'morning', subject: 'Business Studies I' },
    'business-studies-2': { date: '2025-11-17', time: '13:00-16:10', session: 'afternoon', subject: 'Business Studies II' },
    'economics-1': { date: '2025-11-10', time: '13:00-15:00', session: 'afternoon', subject: 'Economics I' },
    'economics-2': { date: '2025-11-11', time: '13:00-16:10', session: 'afternoon', subject: 'Economics II' },
    'accounting-1': { date: '2025-11-25', time: '08:30-10:30', session: 'morning', subject: 'Accounting I' },
    'accounting-2': { date: '2025-11-28', time: '08:30-11:40', session: 'morning', subject: 'Accounting II' },
    'sinhala-1': { date: '2025-11-15', time: '08:30-11:40', session: 'morning', subject: 'Sinhala I' },
    'sinhala-2': { date: '2025-11-18', time: '08:30-11:40', session: 'morning', subject: 'Sinhala II' },
    'history-sri-lanka': { date: '2025-11-28', time: '14:00-17:10', session: 'afternoon', subject: 'History of Sri Lanka' },
    'buddhism-1': { date: '2025-11-10', time: '08:30-10:30', session: 'morning', subject: 'Buddhism I' },
    'buddhism-2': { date: '2025-11-11', time: '08:30-11:40', session: 'morning', subject: 'Buddhism II' },
    'geography-1': { date: '2025-12-01', time: '13:00-16:10', session: 'afternoon', subject: 'Geography I' },
    'geography-2': { date: '2025-12-02', time: '13:00-16:10', session: 'afternoon', subject: 'Geography II' },
    'political-science-1': { date: '2025-11-19', time: '13:00-15:00', session: 'afternoon', subject: 'Political Science I' },
    'political-science-2': { date: '2025-11-21', time: '14:00-17:10', session: 'afternoon', subject: 'Political Science II' },
    'home-economics-1': { date: '2025-11-25', time: '08:30-10:30', session: 'morning', subject: 'Home Economics I' },
    'home-economics-2': { date: '2025-11-27', time: '08:30-11:40', session: 'morning', subject: 'Home Economics II' },
    'media-studies-1': { date: '2025-12-03', time: '13:00-15:00', session: 'afternoon', subject: 'Communication & Media Studies I' },
    'media-studies-2': { date: '2025-12-05', time: '14:00-17:10', session: 'afternoon', subject: 'Communication & Media Studies II' },
    'logic-1': { date: '2025-11-12', time: '13:00-15:00', session: 'afternoon', subject: 'Logic I' },
    'logic-2': { date: '2025-11-14', time: '14:00-17:10', session: 'afternoon', subject: 'Logic II' },
    'k-1': { date: '2025-11-29', time: '13:00-15:00', session: 'afternoon', subject: 'Korean I' },
    'k-2': { date: '2025-12-03', time: '08:00-11:40', session: 'morning', subject: 'Korean II' },
    'general-english-1': { date: '2025-11-24', time: '13:00-14:00', session: 'afternoon', subject: 'General English I' },
    'general-english-2': { date: '2025-11-24', time: '08:30-11:40', session: 'morning', subject: 'General English II' },
    'common-general-test': { date: '2025-11-22', time: '08:30-10:30', session: 'morning', subject: 'Common General Test' },
    'j-1': { date: '2025-12-01', time: '08:00-10:30', session: 'morning', subject: 'Japanese I' },
    'j-2': { date: '2025-12-02', time: '08:00-11:40', session: 'morning', subject: 'Japanese II' },
    'f-1': { date: '2025-11-20', time: '13:00-15:00', session: 'afternoon', subject: 'French I' },
    'f-2': { date: '2025-11-21', time: '08:00-11:40', session: 'morning', subject: 'French II' },
    'el-1': { date: '2025-11-22', time: '13:00-16:10', session: 'afternoon', subject: 'English Literature I' },
    'el-2': { date: '2025-11-25', time: '13:00-16:40', session: 'afternoon', subject: 'English Literature II' },
    'art-1': { date: '2025-11-12', time: '08:30-11:40', session: 'morning', subject: 'Art I' },
    'art-2': { date: '2025-11-24', time: '08:30-11:40', session: 'morning', subject: 'Art II' },
    'm-1': { date: '2025-12-01', time: '08:30-11:40', session: 'morning', subject: 'Mathematics I' },
    'm-2': { date: '2025-12-02', time: '08:30-11:40', session: 'morning', subject: 'Mathematics II' },
    'bst': { date: '2026-01-10', endDate: '2026-01-14', time: '', session: 'morning', subject: 'Bio Systems Technology Practical' },
    'home-economics-practical': { date: '2026-01-04', endDate: '2026-01-14', time: '', session: 'morning', subject: 'Home Economics Practical' },
    'et': { date: '2025-12-13', endDate: '2025-12-23', time: '', session: 'morning', subject: 'Engineering Technology Practical' }
  };

  document.addEventListener('change', function(e) {
    if (e.target.matches('.subject-checkbox input[type="checkbox"]')) {
      updateSelectedCount();
    }
  });

  function updateSelectedCount() {
    const selected = document.querySelectorAll('.subject-checkbox input[type="checkbox"]:checked');
    const count = selected.length;
    document.getElementById('selectedCount').textContent = `${count} subject${count !== 1 ? 's' : ''} selected`;
  }

  function clearSelection() {
    document.querySelectorAll('.subject-checkbox input[type="checkbox"]').forEach(cb => {
      cb.checked = false;
    });
    updateSelectedCount();
  }

  function showMyExamDates() {
    const selectedSubjects = [];
    const selectedExams = [];
    const selectedPracticals = [];
    document.querySelectorAll('.subject-checkbox input[type="checkbox"]:checked').forEach(cb => {
      const subjectName = cb.dataset.name;
      const examCodes = cb.value.split(',');
      selectedSubjects.push(subjectName);
      examCodes.forEach(code => {
        if (examScheduleData[code]) {
          if (code.includes('practical') || code === 'bst' || code === 'home-economics-practical' || code === 'et') {
            selectedPracticals.push(examScheduleData[code]);
          } else {
            selectedExams.push(examScheduleData[code]);
          }
        }
      });
    });

    if (selectedSubjects.length < 3) {
      showAlert('⚠️', 'ප්‍රධාන විශයන් 3 වත් තෝරන්න', 'කරුණාකර ප්‍රධාන විශයන් 3 තෝරාගෙන නැවත උත්සාහ කරන්න.');
      return;
    }

    if (selectedExams.length === 0 && selectedPracticals.length === 0) {
      showAlert('⚠️', 'No Subjects Selected', 'ඔයා විශයයක් තෝරාගෙන නැහැ. කරුණාකර විෂයක් තෝරාගෙන නැවත උත්සාහ කරන්න.');
      return;
    }

    let html = `
      <div style="margin-bottom: 16px; padding: 12px; background: rgba(34,197,94,0.1); border-radius: 8px; border: 1px solid rgba(34,197,94,0.2);">
        <h4 style="margin: 0 0 8px; font-size: 12px; color: var(--success);">📚 Selected Subjects (${selectedSubjects.length})</h4>
        <div style="font-size: 10px; color: #e6eef8;">${selectedSubjects.join(', ')}</div>
      </div>
    `;

    if (selectedExams.length > 0) {
      selectedExams.sort((a, b) => new Date(a.date) - new Date(b.date));
      const examsByDate = {};
      selectedExams.forEach(exam => {
        if (!examsByDate[exam.date]) examsByDate[exam.date] = [];
        examsByDate[exam.date].push(exam);
      });

      html += `
        <div style="margin-bottom: 12px;">
          <h2 style="margin: 0 0 12px; font-size: 12px; color: var(--accent);">📅 විභාග කාල සටහන</h2>
        </div>
      `;

      Object.keys(examsByDate).forEach(date => {
        const dateObj = new Date(date);
        const dateStr = dateObj.toLocaleDateString('en-GB', { 
          weekday: 'long', 
          year: 'numeric', 
          month: 'long', 
          day: 'numeric' 
        });
        html += `
          <div class="exam-date-item">
            <div class="exam-date-header">
              <div class="exam-date">${dateStr}</div>
            </div>
            <div class="exam-sessions">
        `;
        examsByDate[date].forEach(exam => {
          html += `
            <div class="exam-session ${exam.session}">
              <span class="session-time">${exam.time}</span>
              <span class="session-subject">${exam.subject}</span>
            </div>
          `;
        });
        html += `
            </div>
          </div>
        `;
      });
    }

    if (selectedPracticals.length > 0) {
      selectedPracticals.sort((a, b) => new Date(a.date) - new Date(b.date));
      const practicalsByDate = {};
      selectedPracticals.forEach(prac => {
        if (!practicalsByDate[prac.date]) practicalsByDate[prac.date] = [];
        practicalsByDate[prac.date].push(prac);
      });

      html += `
        <div class="practical-section">
          <h4>🧪 Practical Exams</h4>
      `;

      Object.keys(practicalsByDate).forEach(date => {
        const dateObj = new Date(date);
        const dateStr = dateObj.toLocaleDateString('en-GB', { 
          weekday: 'long', 
          year: 'numeric', 
          month: 'long', 
          day: 'numeric' 
        });
        practicalsByDate[date].forEach(prac => {
          let displayDate = dateStr;
          if (prac.endDate && prac.endDate !== prac.date) {
            const endDateObj = new Date(prac.endDate);
            const endDateStr = endDateObj.toLocaleDateString('en-GB', { 
              weekday: 'short', 
              day: 'numeric', 
              month: 'short' 
            });
            displayDate = `${dateStr} to ${endDateStr}`;
          }
          html += `
            <div class="practical-item">
              ${displayDate} — ${prac.subject}
            </div>
          `;
        });
      });
      html += `</div>`;
    }

    document.getElementById('examDatesList').innerHTML = html;
    document.getElementById('examDatesPopup').classList.add('show');
    document.body.style.overflow = 'hidden';
  }

  function closeExamDatesPopup() {
    document.getElementById('examDatesPopup').classList.remove('show');
    document.body.style.overflow = '';
  }

  function copyMySchedule() {
    const selectedSubjects = [];
    const selectedExams = [];
    document.querySelectorAll('.subject-checkbox input[type="checkbox"]:checked').forEach(cb => {
      const subjectName = cb.dataset.name;
      const examCodes = cb.value.split(',');
      selectedSubjects.push(subjectName);
      examCodes.forEach(code => {
        if (examScheduleData[code]) {
          selectedExams.push(examScheduleData[code]);
        }
      });
    });

    if (selectedExams.length === 0) return;

    selectedExams.sort((a, b) => new Date(a.date) - new Date(b.date));

    let scheduleText = `A/L 2025 EXAM SCHEDULE\n━━━━━━━━━━━━━━━━━━━━━━━━━━━\n`;
    scheduleText += `Selected Subjects: ${selectedSubjects.join(', ')}\n\n`;

    const examsByDate = {};
    selectedExams.forEach(exam => {
      if (!examsByDate[exam.date]) {
        examsByDate[exam.date] = [];
      }
      examsByDate[exam.date].push(exam);
    });

    Object.keys(examsByDate).forEach(date => {
      const dateObj = new Date(date);
      const dateStr = dateObj.toLocaleDateString('en-GB', { 
        weekday: 'long', 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric' 
      });
      scheduleText += `${dateStr}\n`;
      examsByDate[date].forEach(exam => {
        scheduleText += `• ${exam.time} | ${exam.subject}\n`;
      });
      scheduleText += '\n';
    });

    scheduleText += '━━━━━━━━━━━━━━━━━━━━━━━━━━━\n';
    scheduleText += 'Generated by A/L Time Table';

    if (navigator.clipboard) {
      navigator.clipboard.writeText(scheduleText).then(() => {
        showCopyConfirmation();
      }).catch(() => {
        fallbackCopy(scheduleText);
      });
    } else {
      fallbackCopy(scheduleText);
    }
  }

  function fallbackCopy(text) {
    const tempTextarea = document.createElement('textarea');
    tempTextarea.value = text;
    document.body.appendChild(tempTextarea);
    tempTextarea.select();
    document.execCommand('copy');
    document.body.removeChild(tempTextarea);
    showCopyConfirmation();
  }

  function showCopyConfirmation() {
    const copyBtn = document.querySelector('.popup-btn:not(.close-btn):not(.download-btn)');
    const originalText = copyBtn.textContent;
    copyBtn.textContent = '✅ Copied!';
    copyBtn.style.background = 'var(--success)';
    setTimeout(() => {
      copyBtn.textContent = originalText;
      copyBtn.style.background = '';
    }, 2000);
  }

  async function downloadScheduleImage() {
    const downloadBtn = document.querySelector('.download-btn');
    const originalText = downloadBtn.textContent;
    try {
      downloadBtn.textContent = '📷 Generating...';
      downloadBtn.disabled = true;

      const selectedSubjects = [];
      document.querySelectorAll('.subject-checkbox input[type="checkbox"]:checked').forEach(cb => {
        selectedSubjects.push(cb.dataset.name);
      });

      const scheduleContainer = document.createElement('div');
      scheduleContainer.style.cssText = `
        width: 800px;
        font-family: Inter, system-ui, -apple-system, sans-serif;
        background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        color: #e6eef8;
        padding: 40px;
        border-radius: 20px;
        position: absolute;
        top: -10000px;
        left: -10000px;
      `;

      const header = document.createElement('div');
      header.style.cssText = `
        text-align: center;
        margin-bottom: 30px;
        border-bottom: 2px solid rgba(124,58,237,0.3);
        padding-bottom: 20px;
      `;
      header.innerHTML = `
        <div style="background: linear-gradient(135deg, #7c3aed, #2563eb); width: 80px; height: 80px; border-radius: 20px; margin: 0 auto 16px; display: flex; align-items: center; justify-content: center; font-size: 32px;">📚</div>
        <h1 style="font-size: 28px; font-weight: 800; margin: 0 0 8px; color: #e6eef8;">A/L 2025 Exam Timetable</h1>
        <p style="font-size: 16px; color: #94a3b8; margin: 0;">Generated by <strong>Sadeepa & Shamika</strong></p>
      `;

      const subjectsInfo = document.createElement('div');
      subjectsInfo.style.cssText = `
        background: rgba(34,197,94,0.1);
        border: 2px solid rgba(34,197,94,0.3);
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 30px;
      `;
      subjectsInfo.innerHTML = `
        <h3 style="color: #22c55e; font-size: 18px; margin: 0 0 12px; font-weight: 700;">📚 Selected Subjects (${selectedSubjects.length})</h3>
        <p style="color: #e6eef8; font-size: 14px; line-height: 1.5; margin: 0;">${selectedSubjects.join(', ')}</p>
      `;

      const examDatesContent = document.getElementById('examDatesList').cloneNode(true);

      const examItems = examDatesContent.querySelectorAll('.exam-date-item');
      examItems.forEach(item => {
        item.style.cssText = `
          background: rgba(255,255,255,0.05);
          border: 1px solid rgba(255,255,255,0.1);
          border-radius: 12px;
          padding: 20px;
          margin-bottom: 16px;
        `;
        const dateHeader = item.querySelector('.exam-date');
        if (dateHeader) {
          dateHeader.style.cssText = `
            font-size: 18px;
            font-weight: 700;
            color: #7c3aed;
            margin-bottom: 12px;
          `;
        }
        const sessions = item.querySelectorAll('.exam-session');
        sessions.forEach(session => {
          session.style.cssText += `
            padding: 12px 16px;
            margin-bottom: 8px;
            border-radius: 8px;
            font-size: 14px;
            display: flex;
            justify-content: space-between;
            align-items: center;
          `;
          const timeSpan = session.querySelector('.session-time');
          const subjectSpan = session.querySelector('.session-subject');
          if (timeSpan) timeSpan.style.cssText = 'font-weight: 700; color: #22c55e;';
          if (subjectSpan) subjectSpan.style.cssText = 'color: #e6eef8; font-weight: 500;';
        });
      });

      const footer = document.createElement('div');
      footer.style.cssText = `
        text-align: center;
        margin-top: 40px;
        padding: 20px 10px;
        border-top: 2px solid rgba(124,58,237,0.3);
        color: #64748b;
        font-size: 14px;
        line-height: 1.6;
      `;
      footer.innerHTML = `
        <p style="margin: 0; font-weight: 600; color:#7c3aed;">
          📅 Generated by <span style="color:#2563eb;">A/L Time Table</span>
        </p>
        <p style="margin: 6px 0 0; font-size: 12px; color:#94a3b8;">
          ⚡ Powered by <strong>Sadeepa & Shamika</strong> • ${new Date().toLocaleDateString()}
        </p>
        <p style="margin: 6px 0 0; font-size: 13px; color:#475569;">
          📞 Contact Sadeepa: 076 816 4223<br>
          📞 Contact Shamika: 070 6050821
        </p>
        <div style="margin-top: 15px; font-size: 12px; text-align: justify; color:#475569; background:#1e293b; padding:10px; border-radius:8px;">
          <p style="margin: 0 0 6px;">
            📝 <strong>විශේෂ අවධානය:</strong> Accounting, Bio Systems Technology, Engineering Technology, Science for Technology විෂයයන් සඳහා <strong>programmable නොවන ගණකයන්</strong> භාවිතා කිරීමට අවසර ඇත.
          </p>
          <p style="margin: 0 0 6px;">
            ❌ වෙනත් කිසිඳු විෂය සඳහා ගණකයන් භාවිතා කිරීමට අවසර නැත.
          </p>
          <p style="margin: 0;">
            🚫 Correcting fluid, ජංගම දුරකථන (mobile phones), සහ ඊලෙක්ට්‍රොනික උපාංග (electronic devices) කිසිඳු විෂයයකට භාවිතා කිරීමට අවසර නැත. එවැනි දේ පරීක්ෂණ ශාලාවට ගෙන එවීම පවා <span style="color:#dc2626; font-weight:600;">දඩුවම් සපයන වරදක්</span> වේ.
          </p>
        </div>
      `;

      scheduleContainer.appendChild(header);
      scheduleContainer.appendChild(subjectsInfo);
      scheduleContainer.appendChild(examDatesContent);
      scheduleContainer.appendChild(footer);
      document.body.appendChild(scheduleContainer);

      const canvas = await html2canvas(scheduleContainer, {
        backgroundColor: null,
        scale: 2,
        useCORS: true,
        allowTaint: true,
        width: 800,
        height: scheduleContainer.scrollHeight
      });

      document.body.removeChild(scheduleContainer);

      const link = document.createElement('a');
      const timestamp = new Date().toISOString().slice(0, 10);
      link.download = `AL-2025-Exam-timetable-${timestamp}.png`;
      link.href = canvas.toDataURL('image/png', 1.0);

      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);

      downloadBtn.textContent = '✅ Downloaded!';
      downloadBtn.style.background = 'var(--success)';
      setTimeout(() => {
        downloadBtn.textContent = originalText;
        downloadBtn.style.background = '';
        downloadBtn.disabled = false;
      }, 2000);
    } catch (error) {
      console.error('Error generating image:', error);
      downloadBtn.textContent = '❌ Error';
      downloadBtn.style.background = '#ef4444';
      setTimeout(() => {
        downloadBtn.textContent = originalText;
        downloadBtn.style.background = '';
        downloadBtn.disabled = false;
      }, 3000);
      showAlert('❌', 'Download Failed', 'Unable to generate the image. Please try again or use the copy function instead.');
    }
  }

  document.addEventListener('click', function(e) {
    if (e.target.classList.contains('popup-overlay')) {
      closeExamDatesPopup();
      closeContactPopup();
    }
    if (e.target.classList.contains('alert-overlay')) {
      closeAlert();
    }
  });

  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      closeExamDatesPopup();
      closeAlert();
      closeContactPopup();
    }
  });

  updateSelectedCount();
  initializeApp();
  console.log('🚀 A/L & O/L Exam Countdown (Fixed Version) initialized!');

  const BOT_PHONE = '94705179349';
  const COMPLAINT_PHONE = '94768164223';

  function openWhatsApp(number, message) {
    const webLink = `https://wa.me/${number}?text=${encodeURIComponent(message)}`;
    window.open(webLink, '_blank');
  }

  document.getElementById('waChat').addEventListener('click', () => {
    const message = `Hi 👋\n🤖 A/L Exam Countdown Bot වලට ඔබව සාදරයෙන් පිළිගනිමු!\n🎯 A/L Exam countdown updates!\n⏰ Daily countdown updates\n💡 Motivational quotes\n📊 Study progress tracking\n🏆 Achievement system\n📚 Support for 2025, 2026 & 2027 batches\nකරුණාකර මගේ daily reminders ලබා ගැනීම සඳහා "activate" බටන් එක කිලික් කරන්න.\n> sadeepa and shamika`;
    openWhatsApp(BOT_PHONE, message);
  });

  if ('ontouchstart' in window) {
    document.querySelectorAll('.wa-btn').forEach(btn => {
      btn.addEventListener('touchstart', () => {
        btn.style.transform = 'scale(0.95)';
      });
      btn.addEventListener('touchend', () => {
        setTimeout(() => {
          btn.style.transform = '';
        }, 100);
      });
    });
  }

  function openComplaintWhatsApp() {
    const message = `📝 Subject/Time Complaint Report 📝\n🎯 A/L 2025 Exam Timetable Complaint\n\nකරුණාකර ඔබේ complaint එක එවන්න. අපි ඒක විමර්ශනය කරලා ඉක්මනින්ම පිළිතුරු දෙන්නම්.:\n\n❗ Missing Subject: ඔබේ විෂයක් නැතිනම් කියන්න\n⏰ Wrong Time: වේලාව වෙනස්නම් correct time එක දෙන්න\n📅 Wrong Date: දිනය වෙනස්නම් correct date එක දෙන්න\n🔄 Other Issues: වෙනත් problems\n\nThanks for helping us improve!\n- Team Sadeepa & Shamika`;
    openWhatsApp(COMPLAINT_PHONE, message);
  }

  const form = document.getElementById('contactForm');
  const submitBtn = document.getElementById('submitBtn');
  const statusMessage = document.getElementById('statusMessage');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    submitBtn.disabled = true;
    submitBtn.textContent = 'Sending...';
    statusMessage.classList.remove('show', 'success', 'error');

    const formData = new FormData(form);
    const object = Object.fromEntries(formData);
    const json = JSON.stringify(object);

    try {
      const response = await fetch('https://api.web3forms.com/submit', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Accept': 'application/json'
        },
        body: json
      });

      const result = await response.json();

      if (result.success) {
        statusMessage.textContent = '✓ Message sent successfully!';
        statusMessage.classList.add('success', 'show');
        form.reset();
      } else {
        statusMessage.textContent = '✗ Something went wrong. Please try again.';
        statusMessage.classList.add('error', 'show');
      }
    } catch (error) {
      statusMessage.textContent = '✗ Network error. Please check your connection.';
      statusMessage.classList.add('error', 'show');
    } finally {
      submitBtn.disabled = false;
      submitBtn.textContent = 'Send Message';
      setTimeout(() => {
        statusMessage.classList.remove('show');
      }, 5000);
    }
  });


  // Notification permission check and request
let notificationEnabled = false;
let dailyNotificationScheduled = false;

// Check if user has already set notification preference
window.addEventListener('load', function() {
  console.log('Page loaded - checking notifications');
  const notificationPref = localStorage.getItem('notificationEnabled');
  const hasSeenPrompt = localStorage.getItem('notificationPromptSeen');
  
  console.log('Notification permission:', Notification.permission);
  console.log('Has seen prompt:', hasSeenPrompt);
  
  if (!hasSeenPrompt && Notification.permission !== 'granted') {
    // Show notification modal after 3 seconds
    console.log('Will show notification modal in 3 seconds');
    setTimeout(() => {
      console.log('Showing notification modal now');
      showNotificationModal();
    }, 3000);
  } else if (Notification.permission === 'granted' && notificationPref === 'true') {
    notificationEnabled = true;
    scheduleDailyNotification();
  }
});

// Show notification badge initially
window.addEventListener('DOMContentLoaded', function() {
  const notificationBadge = document.getElementById('notificationBadge');
  if (notificationBadge && Notification.permission !== 'granted') {
    notificationBadge.classList.add('show');
  }
  updateNotificationBadge();
});

function showNotificationModal() {
  const modal = document.getElementById('notificationModal');
  if (modal) {
    modal.classList.add('show');
    localStorage.setItem('notificationPromptSeen', 'true');
    console.log('Notification modal displayed');
  } else {
    console.error('Notification modal not found!');
  }
}

function closeNotificationModal() {
  const modal = document.getElementById('notificationModal');
  if (modal) {
    modal.classList.remove('show');
  }
}

async function enableNotifications() {
  try {
    if (!('Notification' in window)) {
      showAlert('⚠️', 'Browser Support', 'ඔබගේ browser එක notifications support නොකරයි.');
      closeNotificationModal();
      return;
    }

    if (Notification.permission === 'granted') {
      notificationEnabled = true;
      localStorage.setItem('notificationEnabled', 'true');
      scheduleDailyNotification();
      showAlert('✅', 'Success!', 'දිනපතා උදේ 4ට notifications ලැබෙනවා! 🎉');
      closeNotificationModal();
      
      // Update badge
      updateNotificationBadge();
      
      // Send test notification
      sendTestNotification();
      return;
    }

    if (Notification.permission !== 'denied') {
      const permission = await Notification.requestPermission();
      if (permission === 'granted') {
        notificationEnabled = true;
        localStorage.setItem('notificationEnabled', 'true');
        scheduleDailyNotification();
        showAlert('✅', 'Success!', 'දිනපතා උදේ 4ට notifications ලැබෙනවා! 🎉');
        closeNotificationModal();
        
        // Update badge
        updateNotificationBadge();
        
        // Send test notification
        sendTestNotification();
      } else {
        showAlert('❌', 'Permission Denied', 'Notification permission එක deny කරා. Browser settings එකෙන් enable කරන්න.');
        closeNotificationModal();
      }
    } else {
      showAlert('⚠️', 'Permission Blocked', 'Notifications block වෙලා තියෙනවා. Browser settings එකෙන් enable කරන්න.');
      closeNotificationModal();
    }
  } catch (error) {
    console.error('Notification error:', error);
    showAlert('❌', 'Error', 'Something went wrong. Please try again.');
    closeNotificationModal();
  }
}

function updateNotificationBadge() {
  const badge = document.getElementById('notificationBadge');
  if (badge) {
    if (Notification.permission === 'granted' && localStorage.getItem('notificationEnabled') === 'true') {
      badge.textContent = '🔔 Notifications ON';
      badge.style.background = 'linear-gradient(135deg, #22c55e, #16a34a)';
    } else {
      badge.textContent = '🔕 Enable Notifications';
      badge.style.background = 'linear-gradient(135deg, var(--accent), #2563eb)';
    }
  }
}

function sendTestNotification() {
  const currentBatch = document.querySelector('.batch-btn.active')?.dataset.batch || '2025';
  const examDates = {
    '2025': new Date('2025-11-10'),
    '2026': new Date('2026-08-03'),
    '2027': new Date('2027-08-02'),
    'ol': new Date('2026-12-07')
  };
  
  const targetDate = examDates[currentBatch];
  const now = new Date();
  const diff = targetDate - now;
  const daysLeft = Math.floor(diff / (1000 * 60 * 60 * 24));
  
  const notification = new Notification('🎯 A/L Exam Countdown', {
    body: `විභාගයට තව දින ${daysLeft}ක් ඉතිරියි!\n\n"Success is the sum of small efforts repeated daily." 💪`,
    icon: 'https://i.ibb.co/jZJK1jqK/exam-bot-dp2.png',
    badge: 'https://i.ibb.co/jZJK1jqK/exam-bot-dp2.png',
    tag: 'exam-countdown',
    requireInteraction: false
  });

  notification.onclick = function() {
    window.focus();
    notification.close();
  };
}

function scheduleDailyNotification() {
  if (!notificationEnabled || dailyNotificationScheduled) return;
  
  dailyNotificationScheduled = true;
  console.log('Daily notifications scheduled');
  
  // Check every minute
  setInterval(checkAndSendNotification, 60000);
  
  // Also schedule using a more precise method
  scheduleNext4AM();
}

function checkAndSendNotification() {
  const now = new Date();
  const hours = now.getHours();
  const minutes = now.getMinutes();
  
  // Send notification at 4:00 AM
  if (hours === 11 && minutes === 0) {
    sendDailyNotification();
  }
}

function scheduleNext4AM() {
  const now = new Date();
  const next4AM = new Date();
  next4AM.setHours(11, 0, 0, 0);
  
  // If it's already past 4 AM today, schedule for tomorrow
  if (now > next4AM) {
    next4AM.setDate(next4AM.getDate() + 1);
  }
  
  const timeUntil4AM = next4AM - now;
  
  console.log('Next notification scheduled for:', next4AM);
  
  setTimeout(() => {
    sendDailyNotification();
    // Schedule the next one
    scheduleNext4AM();
  }, timeUntil4AM);
}

function sendDailyNotification() {
  if (!notificationEnabled || Notification.permission !== 'granted') return;
  
  const currentBatch = localStorage.getItem('selectedBatch') || '2025';
  const examDates = {
    '2025': new Date('2025-11-10'),
    '2026': new Date('2026-08-03'),
    '2027': new Date('2027-08-02'),
    'ol': new Date('2026-12-07')
  };
  
  const targetDate = examDates[currentBatch];
  const now = new Date();
  const diff = targetDate - now;
  const daysLeft = Math.floor(diff / (1000 * 60 * 60 * 24));
  
  const motivationalQuotes = [
    "Success is not final, failure is not fatal: it is the courage to continue that counts.",
    "Believe you can and you're halfway there.",
    "The secret of getting ahead is getting started.",
    "Don't watch the clock; do what it does. Keep going.",
    "The future depends on what you do today.",
    "Success is the sum of small efforts repeated day in and day out.",
    "Dream big, work hard, stay focused.",
    "Your limitation—it's only your imagination.",
    "Great things never come from comfort zones.",
    "Don't stop when you're tired. Stop when you're done."
  ];
  
  const randomQuote = motivationalQuotes[Math.floor(Math.random() * motivationalQuotes.length)];
  
  const batchNames = {
    '2025': '2025 A/L',
    '2026': '2026 A/L',
    '2027': '2027 A/L',
    'ol': '2025 O/L'
  };
  
  const notification = new Notification(`⏰ ${batchNames[currentBatch]} Countdown`, {
    body: `සුභ උදෑසනක්! 🌅\n\nවිභාගයට තව දින ${daysLeft}ක් ඉතිරියි!\n\n💭 "${randomQuote}"\n\n💪 අද දවසත් ඔබේ best එක දෙන්න!`,
    icon: 'https://i.ibb.co/jZJK1jqK/exam-bot-dp2.png',
    badge: 'https://i.ibb.co/jZJK1jqK/exam-bot-dp2.png',
    tag: 'daily-countdown',
    requireInteraction: true,
    vibrate: [200, 100, 200]
  });

  notification.onclick = function() {
    window.focus();
    notification.close();
  };
  
  console.log('Daily notification sent at', new Date());
}

// Save selected batch for notifications
document.querySelectorAll('.batch-btn').forEach(btn => {
  btn.addEventListener('click', function() {
    localStorage.setItem('selectedBatch', this.dataset.batch);
  });
});
</script>
</body>
</html>
